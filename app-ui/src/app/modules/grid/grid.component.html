<div>
  <div class="content-container product-tile-container nopad" [ngClass]="{ 'grid-container': gridOnlyTemplate, 'nav-tray-expanded': categoryNavigationTray.show }">
    <div class="result-title">
      <div class="result-title-wrapper">
        <app-page-title></app-page-title>
        <app-category-navigation-tray id="category-nav-tray"
                                      (toggleCategoryNavigationTray)="toggleCategoryNavigationTray()"></app-category-navigation-tray>
        <!-- Sorting Option - Starts Here -->
        <app-sort-by
          *ngIf="!filterProductsData?.facetsFilters && result"
          [parentClass]="'no-filter'">
        </app-sort-by>
        <!-- Sorting Option - Ends Here -->
      </div>
    </div>

    <!--Filter and Sort elements -->
    <div aria-live="assertive" class="parent-container filter-sort-section filter-enhanced"
         *ngIf="filterProductsData?.facetsFilters"
         [ngClass]="{'filter-nested-sticky': isDesktop}"
         [style.top.px]="filterStickyTopOffset()">
    <div class="container">
        <div class="flex-space-between filter-sort-section">
          <!-- Filter Option - Starts Here -->
          <div  class="filter-options" *ngIf="filterProductsData?.facetsFilters">
            <div role="link" (click)="filterToggle()" (keyup.enter)="filterToggle()" [class.link-active]="showFacetsFilters" class="filter-link" tabindex="0" [attr.aria-expanded] = "showFacetsFilters">
              <span class="g-icons icon-filter"></span> {{ "filterLabel" | translate }}
            </div>
            <div class="reset-link" *ngIf="enableResetFlag">
              <a role="button" [routerLink]="[]" [queryParams]="null">
                            <span role="link" class="reset-label">
                              {{ "resetLabel" | translate }}</span></a>
            </div>
          </div>
          <!-- Filter Option - Ends Here -->
          <!-- Sorting Option - Starts Here -->
          <app-sort-by></app-sort-by>
          <!-- Sorting Option - Ends Here -->
        </div>
      </div>
    </div>

    <div class="product-result-list contain">
      <!-- Facets Filter - Tree -->
      <div class="facets-filter-backdrop" *ngIf="showFacetsFilters && isMobile && filterProductsData?.facetsFilters"></div>
      <app-facets-filters-component #facetComponent *ngIf="filterProductsData?.facetsFilters"
                                    [facetsFilters]="filterProductsData?.facetsFilters"
                                    [facetsScrollObj] = "facetsScrollObj"
                                    (triggerApiEmitter)="triggerApi($event)"
                                    (triggerScrollEmitter)="triggerScroll()"
                                    [enableResetFlag]="enableResetFlag"
                                    [latestFacetsFilter]="latestFacetsFilter"
                                    (closeModal)="closeModal($event)" class="block-animated"
                                    [ngClass]="(showFacetsFilters ? 'filters-show' : 'ng-hide') + ' ' + (filterToggleClicked ? 'facets-filters-shrink-animation' : '')">
      </app-facets-filters-component>
      <!-- Facets Filter - Tree -->

      <div class="product-grid-view" [ngClass]="{ 'filters-enabled': showFacetsFilters && filterProductsData?.facetsFilters  }">
        <ng-container *ngIf="!productLoadError">
          <ul id="grid" role="list">
            <li class="loading-tile nopad" *ngIf="!result" role="alert" [attr.aria-label]="'loadingAlt' | translate">
              <p class="loading-image medium"></p>
            </li>
            <ng-container *ngIf="
                item &&
                (item.available ||
                  (displayBackorderedProducts && !item.available)) &&
                result
              ">
              <li class="nopad" *ngFor="let item of items; let index = index" [ngClass]="{
                  'no-right-border': !((index + 1) % 3),
                  'no-left-folder': !(index % 3) && showFacetsFilters && filterProductsData?.facetsFilters
                }">
                <app-tile [item]="item" [messages]="messages" [imageSize]="'431'" [index]="index"></app-tile>
              </li>
            </ng-container>
            <li *ngIf="productLoadError">
              <strong>{{ "noResultsFound" | translate }}</strong>
            </li>
          </ul>
        </ng-container>
        <div class="page-error-container" *ngIf="productLoadError" role="alert" aria-live="polite">
          <h2 role="presentation" *ngIf="!routeParams['subcat'] && !routeParams['addCat']">{{ categoryName }} {{ messages.modelsUnavailable }}</h2>
          <h2 role="presentation" *ngIf="routeParams['subcat'] && !routeParams['addCat']">{{ subcatName }} {{ messages.modelsUnavailable }}</h2>
          <h2 role="presentation" *ngIf="routeParams['addCat']">{{ addCatName }} {{ messages.modelsUnavailable }}</h2>
          <p role="presentation">{{ messages.tryAgainLater }}</p>
        </div>
      </div>
    </div>
  </div>

  <p class="msg-disclaimer p-l-15" *ngIf="config.showTaxDisclaimer">* {{ 'taxFeeDisclaimer' | translate }}</p>
  <p [innerText]="'EstimateDisclaimer' | translate" class="msg-disclaimer p-l-15" *ngIf="user.isEligibleForPayrollDeduction"></p>
</div>
