<div class="billing-address" [formGroup]="billingAddressForm">
  <h4 class="address-title">{{'billingAddress' | translate}}</h4>

  <div class="use-shipping-address">
    <input id="useSameShippingAddress" name="useSameShippingAddress" type="checkbox" formControlName="useSameShippingAddress">
    <label for="useSameShippingAddress">{{'useMyShippingAddress' | translate}}</label>
  </div>
  <article *ngIf="controlContainer.value.useSameShippingAddress">
    <p>{{ shippingAddress.recipientName }}</p>
    <p>{{ shippingAddress.address1 }}</p>
    <p [hidden]="!shippingAddress.address2">{{ shippingAddress.address2 }}</p>
    <p [hidden]="!shippingAddress.address3">{{ shippingAddress.address3 }}</p>
    <p>{{ shippingAddress.city }}
      <span [hidden]="!shippingAddress.subCity">{{ ', ' + shippingAddress.subCity }}</span>
      <span [hidden]="!shippingAddress.state">{{ ', ' + shippingAddress.state }}</span>
    </p>
    <p [hidden]="!shippingAddress.zip5" >{{ shippingAddress.zip5 | mask :'': 'all': 0 : '*' : 0 : config.maskInputs  }}</p>  <!-- Mask to be implemented -->
    <p>{{ shippingAddress.country }}</p>
  </article>


  <article class="address-form" *ngIf="!controlContainer.value.useSameShippingAddress">
    <article class="address-form">
      <div class="field-row" [ngClass]="{'input-entered': billingAddressForm.get('address1').value}">
        <input type="text" id="address1" name="address1" formControlName="address1" class="lrg-text-field"
               [attr.aria-describedby]="errorMessage.address1 ? 'address1_msg' : 'address1'" aria-invalid="false"  maxLength="35" required>
        <label for="address1">{{ 'addressLine1' | translate }}<span class="hideFromDOM">{{'maxLengthText' | translate}} 35 </span></label>
        <div *ngIf="errorMessage.address1">
          <p class="error-text g-icons" id="address1_msg">{{ errorMessage.address1 }}</p>
        </div>
      </div>
      <div class="field-row" [ngClass]="{'input-entered': billingAddressForm.get('address2').value}">
        <input type="text" id="address2" name="address2" maxLength="35" formControlName="address2" class="lrg-text-field"
               [attr.aria-describedby]="errorMessage['address2'] ? 'address2_msg' : 'address2'">
        <label for="address2">{{ 'addressLine2' | translate }}
          {{(country === 'AU' || locale === 'th_th') ? ('(' + ('optional' | translate) + ')') : ''  }}
          <span class="hideFromDOM">{{ 'maxLengthText' | translate }} 35</span>
        </label>
        <div *ngIf="errorMessage.address2">
          <p class="error-text g-icons" id="address2_msg">{{ errorMessage.address2 }}</p>
        </div>
      </div>
      <div class="field-row" *ngIf="country === 'MX' || country === 'TH' || country === 'MY'" [ngClass]="{'input-entered':billingAddressForm.get('address3').value}">
        <input type="text" id="address3" name="address3" [attr.aria-describedby]="errorMessage.address3 ? 'address3_msg' : 'address3'"
               maxLength="35" formControlName="address3" class="lrg-text-field">
        <label for="address3">{{ 'addressLine3'| translate }}
          {{(locale === 'th_th') ? ('(' + 'optional' + ')') : '' | translate }}
          <span class="hideFromDOM">{{ 'maxLengthText' | translate }} 35</span>
        </label>
        <div *ngIf="errorMessage.address3">
          <p class="error-text g-icons" id="address3_msg">{{ errorMessage.address3 }}</p>-->
        </div>
      </div>
      <div class="field-row" *ngIf="country !== 'SG'" [ngClass]="{'input-entered':  billingAddressForm.get('city').value}">
        <input type="text" id="city" name="city" maxLength="35" formControlName="city" class="large"
               aria-invalid="false" required [attr.aria-describedby]="errorMessage.city ? 'city_msg' :'city'">
        <label for="city">{{ 'city' | translate }}<span class="hideFromDOM">{{ 'maxLengthText' | translate }} 35</span></label>
        <div *ngIf="errorMessage.city">
          <p class="error-text g-icons" id="city_msg">{{ errorMessage.city }}</p>
        </div>
      </div>
      <div class="field-row" *ngIf="country === 'US' || country === 'CA' || country === 'MX' || country === 'AU'"
           [ngClass]="{'input-entered': billingAddressForm.get('state').value}">
        <select id="state" name="state" #state formControlName="state" [attr.aria-describedby]="errorMessage.state ? 'state_msg' : 'state'" required>
          <option *ngFor="let state of shippingStates | keyvalue: sharedService.returnZero" [ngValue]="state.value" [label]="state.key">{{ state.value }}</option>
        </select>
        <label for="state">{{ 'stateProvince' | translate }}<span class="hideFromDOM">{{ 'maxLengthText' | translate }} 2</span></label>

        <div *ngIf="errorMessage.state">
          <p class="error-text g-icons" id="state_msg">{{ errorMessage.state }}</p>
        </div>
      </div>
      <div class="field-row" *ngIf="country === 'PH' || country === 'MY'" [ngClass]="{'input-entered': billingAddressForm.get('input_state').value}">
        <input id="input_state" class="{{input_state.value}}" name="state" #input_state formControlName="input_state"
               aria-invalid="false" required [attr.aria-describedby]="errorMessage.state ? 'input_state_msg' : 'state'"/>
        <label for="input_state">{{ 'stateProvince' | translate }}<span class="hideFromDOM">{{ 'maxLengthText' | translate }} 60</span></label>

        <div *ngIf="errorMessage.state">
          <p class="error-text g-icons" id="input_state_msg">{{ errorMessage.state }}</p>
        </div>
      </div>
      <div class="field-row" *ngIf="country !== 'HK' && country !== 'AE'" [ngClass]="{'input-entered':billingAddressForm.get('zip5').value}">
        <input type="text" id="zip5" name="zip5" #zip5 formControlName="zip5" [maxlength]="country === 'US' ? 5 : 7"
               [ngClass]="{'postal-code':isPostalCode}" [attr.aria-describedby]="errorMessage.zip5 ? 'zip5_msg' : 'zip5'"
               [libMask] = "billingAddressForm.controls.zip5.value" [attr.data-maskValue]= "billingAddressForm.controls.zip5.value" [maskPattern]="''" maskPosition="all" maskLength="0" maskChar="*" minMaskRequirement="0"
               [useMask] = "config.maskInputs"
               aria-invalid="false" required>
        <label for="zip5">{{ 'zipPostal' | translate }}<span class="hideFromDOM">{{ 'maxLengthText' | translate }} 4</span></label>
        <div *ngIf="errorMessage.zip5">
          <p class="error-text g-icons" id="zip5_msg">{{ errorMessage.zip5 }}</p>
        </div>
      </div>
      <div class="field-row input-entered">
        <input type="hidden" class="country-field hidden" name="country" aria-hidden="true">
        <input type="text" id="country" value="{{ 'country' | translate }}" [disabled]="true"/>
        <label for="country">{{ 'countryLabel' | translate }}</label>
      </div>
    </article>
  </article>
</div>
